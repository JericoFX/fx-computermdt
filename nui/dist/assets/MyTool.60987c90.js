import{S as ee,i as te,s as ne,e as o,a as N,c as ie,b as u,d as _,f as J,g as i,m as se,l as T,J as le,h as ae,t as F,j as Y,k as L,n as oe,r as de,o as pe,p as ge,q as me,u as R,a5 as re,a6 as _e,a7 as we,v as be,G as ce,w as B,x as ue,y as A,D as E,a1 as fe,z as ve,a8 as Q,B as ye,H as V,F as W,a9 as X,aa as Z}from"./index.71b4f52f.js";import{S as Ce}from"./short-unique-id.810323c2.js";function $(n){let s,l,t,a,d,m,f,D,r,p,g,k,w,b,M,v,S,e,c,y;function q(h){n[8](h)}let z={style:n[4],columns:n[6],data:n[3].codes||[],pagination:{enabled:!0,limit:6},search:!0};return n[1]!==void 0&&(z.instance=n[1]),w=new ce({props:z}),B.push(()=>ue(w,"instance",q)),{c(){s=o("div"),l=o("div"),t=o("div"),a=o("div"),a.textContent="Set new Report",d=N(),m=o("div"),f=o("button"),D=N(),r=o("div"),p=o("fieldset"),g=o("div"),k=o("fieldset"),ie(w.$$.fragment),M=N(),v=o("section"),S=o("button"),S.textContent="Close",u(a,"class","title-bar-text"),u(f,"aria-label","Close"),u(m,"class","title-bar-controls"),u(t,"class","title-bar"),u(g,"class","field-row"),_(g,"justify-content","center"),u(p,"class","text-center"),u(v,"class","field-row"),_(v,"justify-content","space-around"),_(v,"align-content","center"),u(r,"class","window-body relative-position"),_(r,"max-height","64vh",!1),u(l,"class","window full-width"),u(s,"class","absolute-center "),_(s,"width","100%"),_(s,"max-width","100%"),_(s,"min-width","40%"),_(s,"height","65vh")},m(h,I){J(h,s,I),i(s,l),i(l,t),i(t,a),i(t,d),i(t,m),i(m,f),i(l,D),i(l,r),i(r,p),i(p,g),i(g,k),se(w,k,null),i(r,M),i(r,v),i(v,S),n[9](s),e=!0,c||(y=[T(f,"click",le(n[7])),T(S,"click",n[5])],c=!0)},p(h,I){const j={};I&8&&(j.data=h[3].codes||[]),!b&&I&2&&(b=!0,j.instance=h[1],ae(()=>b=!1)),w.$set(j)},i(h){e||(F(w.$$.fragment,h),e=!0)},o(h){Y(w.$$.fragment,h),e=!1},d(h){h&&L(s),oe(w),n[9](null),c=!1,de(y)}}}function ke(n){let s,l,t=n[0]&&$(n);return{c(){t&&t.c(),s=pe()},m(a,d){t&&t.m(a,d),J(a,s,d),l=!0},p(a,[d]){a[0]?t?(t.p(a,d),d&1&&F(t,1)):(t=$(a),t.c(),F(t,1),t.m(s.parentNode,s)):t&&(ge(),Y(t,1,1,()=>{t=null}),me())},i(a){l||(F(t),l=!0)},o(a){Y(t),l=!1},d(a){t&&t.d(a),a&&L(s)}}}function De(n,s,l){let t,a,d;R(n,re,e=>l(10,t=e)),R(n,_e,e=>l(11,a=e)),R(n,we,e=>l(3,d=e));let m=new Ce({length:5}),f,D;const r=be();let{open:p=!1}=s;const g={table:{width:"100%",height:"100%"},header:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},footer:{width:"100%"}};function k(){l(0,p=!1),r("closeModal")}const w=[{id:"id",name:"Code ID",width:"3%"},{id:"code",name:"Code",width:"10%"},{id:"desc",name:"Code Description",width:"20%"},{id:"add",name:"Action",formatter:(e,c)=>A("button",{onClick:()=>{b(c.cells[0].data,c.cells[2].data)}},"Select"),width:"10%"}];function b(e,c){a.some(y=>y.code===e&&y.callsign===t.callsign)||E("sendHelpRequest",{uid:m(),code:e,text:c,callsign:t.callsign,taked:!1})}const M=()=>fe("/");function v(e){f=e,l(1,f)}function S(e){B[e?"unshift":"push"](()=>{D=e,l(2,D)})}return n.$$set=e=>{"open"in e&&l(0,p=e.open)},[p,f,D,d,g,k,w,M,v,S]}class Me extends ee{constructor(s){super(),te(this,s,De,ke,ne,{open:0})}}function Se(n){let s,l,t,a,d,m,f,D,r,p,g,k,w,b,M=n[3]===!0?"YES":"NO",v,S,e,c,y,q,z,h,I,j,G,U,H,x;function he(C){n[11](C)}let K={style:n[4],columns:n[5],data:n[1]||[]};return n[0]!==void 0&&(K.instance=n[0]),y=new ce({props:K}),B.push(()=>ue(y,"instance",he)),{c(){s=o("div"),l=o("div"),t=o("div"),a=o("div"),a.textContent="MY TOOL",d=N(),m=o("div"),f=o("button"),D=N(),r=o("div"),p=o("fieldset"),g=o("div"),k=o("p"),k.textContent="On Duty:",w=N(),b=o("span"),v=ve(M),S=N(),e=o("div"),c=o("fieldset"),ie(y.$$.fragment),z=N(),h=o("section"),I=o("button"),I.textContent="Change Duty",j=N(),G=o("button"),G.textContent="Request Back Up",u(a,"class","title-bar-text"),u(f,"aria-label","Close"),u(m,"class","title-bar-controls"),u(t,"class","title-bar"),u(k,"class","nameField text-h6 text-weight-light  svelte-325c33"),u(b,"class","inputField text-h6 text-weight-medium svelte-325c33"),Q(b,"dutyon",!!n[3]),u(g,"class","field-row"),_(g,"justify-content","center"),u(e,"class","field-row"),_(e,"justify-content","center"),u(p,"class","text-center"),u(h,"class","field-row"),_(h,"justify-content","space-around"),_(h,"align-content","center"),u(r,"class","window-body relative-position full-height"),_(r,"max-height","100vh",!1),u(l,"class","window full-width full-height"),u(s,"class","absolute-center "),_(s,"width","70%"),_(s,"max-width","100%"),_(s,"min-width","40%")},m(C,O){J(C,s,O),i(s,l),i(l,t),i(t,a),i(t,d),i(t,m),i(m,f),i(l,D),i(l,r),i(r,p),i(p,g),i(g,k),i(g,w),i(g,b),i(b,v),i(p,S),i(p,e),i(e,c),se(y,c,null),i(r,z),i(r,h),i(h,I),i(h,j),i(h,G),n[12](s),U=!0,H||(x=[T(f,"click",le(n[10])),T(I,"click",n[6]),T(G,"click",n[7])],H=!0)},p(C,[O]){(!U||O&8)&&M!==(M=C[3]===!0?"YES":"NO")&&ye(v,M),O&8&&Q(b,"dutyon",!!C[3]);const P={};O&2&&(P.data=C[1]||[]),!q&&O&1&&(q=!0,P.instance=C[0],ae(()=>q=!1)),y.$set(P)},i(C){U||(F(y.$$.fragment,C),U=!0)},o(C){Y(y.$$.fragment,C),U=!1},d(C){C&&L(s),oe(y),n[12](null),H=!1,de(x)}}}function Ie(n,s,l){let t,a,d;R(n,X,e=>l(3,t=e)),R(n,re,e=>l(9,a=e)),R(n,Z,e=>l(1,d=e));let m,f;const D={table:{width:"100%"},header:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},footer:{width:"100%"}};let{params:r={}}=s;V(()=>{f.forceRender()});const p=[{id:"casid",name:"Case ID",width:"10%"},{id:"name",name:"Citizen Name",width:"10%"},{id:"citizenid",name:"Citizenid",width:"10%"},{id:"coordinates",name:"Coordinates",formatter:(e,c)=>A("button",{onClick:()=>{g(c.cells[3].data)}},"Set"),width:"10%"},{id:"delete",name:"Delete",formatter:(e,c)=>A("button",{onClick:()=>{k(c.cells[0].data)}},"Delete"),width:"10%"}];async function g(e){await E("setDestination",{coords:e})}async function k(e){try{E("deleteAssignment",{id:e,callsign:a.callsign}).then(c=>{c&&f.updateConfig({data:d!=null?d:[]}).forceRender()})}catch(c){console.log(`Error on MyTool 105 ${c}`)}}V(()=>{f.forceRender()});async function w(){try{await E("changeDuty",{user:a.citizenid,duty:t}).then(e=>{W(X,t=e,t)})}catch{}}function b(){let e=!0,c=new Me({target:m,props:{open:e}});return c.$on("closeModal",()=>e=!1),c}const M=()=>fe("/");function v(e){f=e,l(0,f)}function S(e){B[e?"unshift":"push"](()=>{m=e,l(2,m)})}return n.$$set=e=>{"params"in e&&l(8,r=e.params)},n.$$.update=()=>{n.$$.dirty&771&&r.reload&&(E("getMycalls",{cs:a.callsign}).then(e=>{W(Z,d=e,d),f.updateConfig({data:d!=null?d:[]}).forceRender()}),l(8,r.reload=!1,r))},[f,d,m,t,D,p,w,b,r,a,M,v,S]}class Oe extends ee{constructor(s){super(),te(this,s,Ie,Se,ne,{params:8})}}export{Oe as default};
