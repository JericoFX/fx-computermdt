import{S as $,i as ee,s as te,e as o,a as N,c as ne,b as r,d as w,f as K,g as i,m as ie,l as E,F as se,h as le,t as F,j as T,k as L,n as ae,r as oe,o as he,p as pe,q as ge,u as R,$ as de,a0 as me,a1 as _e,v as we,w as Y,x as ce,C as A,X as re,y as be,a2 as J,A as ve,D as ye,Q as V,a3 as W,K as B}from"./index.8d40a81e.js";import{S as Ce,G as ue,y as H}from"./short-unique-id.4c7b33ed.js";function Z(n){let s,l,t,a,d,m,h,D,c,p,g,k,b,v,I,y,S,e,u,_;function q(f){n[8](f)}let U={style:n[4],columns:n[6],data:n[3].codes||[],pagination:{enabled:!0,limit:6},search:!0};return n[1]!==void 0&&(U.instance=n[1]),b=new ue({props:U}),Y.push(()=>ce(b,"instance",q)),{c(){s=o("div"),l=o("div"),t=o("div"),a=o("div"),a.textContent="Set new Report",d=N(),m=o("div"),h=o("button"),D=N(),c=o("div"),p=o("fieldset"),g=o("div"),k=o("fieldset"),ne(b.$$.fragment),I=N(),y=o("section"),S=o("button"),S.textContent="Close",r(a,"class","title-bar-text"),r(h,"aria-label","Close"),r(m,"class","title-bar-controls"),r(t,"class","title-bar"),r(g,"class","field-row"),w(g,"justify-content","center"),r(p,"class","text-center"),r(y,"class","field-row"),w(y,"justify-content","space-around"),w(y,"align-content","center"),r(c,"class","window-body relative-position"),w(c,"max-height","64vh",!1),r(l,"class","window full-width"),r(s,"class","absolute-center "),w(s,"width","100%"),w(s,"max-width","100%"),w(s,"min-width","40%"),w(s,"height","65vh")},m(f,M){K(f,s,M),i(s,l),i(l,t),i(t,a),i(t,d),i(t,m),i(m,h),i(l,D),i(l,c),i(c,p),i(p,g),i(g,k),ie(b,k,null),i(c,I),i(c,y),i(y,S),n[9](s),e=!0,u||(_=[E(h,"click",se(n[7])),E(S,"click",n[5])],u=!0)},p(f,M){const j={};M&8&&(j.data=f[3].codes||[]),!v&&M&2&&(v=!0,j.instance=f[1],le(()=>v=!1)),b.$set(j)},i(f){e||(F(b.$$.fragment,f),e=!0)},o(f){T(b.$$.fragment,f),e=!1},d(f){f&&L(s),ae(b),n[9](null),u=!1,oe(_)}}}function ke(n){let s,l,t=n[0]&&Z(n);return{c(){t&&t.c(),s=he()},m(a,d){t&&t.m(a,d),K(a,s,d),l=!0},p(a,[d]){a[0]?t?(t.p(a,d),d&1&&F(t,1)):(t=Z(a),t.c(),F(t,1),t.m(s.parentNode,s)):t&&(pe(),T(t,1,1,()=>{t=null}),ge())},i(a){l||(F(t),l=!0)},o(a){T(t),l=!1},d(a){t&&t.d(a),a&&L(s)}}}function De(n,s,l){let t,a,d;R(n,de,e=>l(10,t=e)),R(n,me,e=>l(11,a=e)),R(n,_e,e=>l(3,d=e));let m=new Ce({length:5}),h,D;const c=we();let{open:p=!1}=s;const g={table:{width:"100%",height:"100%"},header:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},footer:{width:"100%"}};function k(){l(0,p=!1),c("closeModal")}const b=[{id:"id",name:"Code ID",width:"3%"},{id:"code",name:"Code",width:"10%"},{id:"desc",name:"Code Description",width:"20%"},{id:"add",name:"Action",formatter:(e,u)=>H("button",{onClick:()=>{v(u.cells[0].data,u.cells[2].data)}},"Select"),width:"10%"}];function v(e,u){a.some(_=>_.code===e&&_.callsign===t.callsign)||A("sendHelpRequest",{uid:m(),code:e,text:u,callsign:t.callsign,taked:!1})}const I=()=>re("/");function y(e){h=e,l(1,h)}function S(e){Y[e?"unshift":"push"](()=>{D=e,l(2,D)})}return n.$$set=e=>{"open"in e&&l(0,p=e.open)},[p,h,D,d,g,k,b,I,y,S]}class Ie extends ${constructor(s){super(),ee(this,s,De,ke,te,{open:0})}}function Se(n){let s,l,t,a,d,m,h,D,c,p,g,k,b,v,I=n[3]===!0?"YES":"NO",y,S,e,u,_,q,U,f,M,j,G,z,P,Q;function fe(C){n[11](C)}let X={style:n[4],columns:n[5],data:n[1]||[]};return n[0]!==void 0&&(X.instance=n[0]),_=new ue({props:X}),Y.push(()=>ce(_,"instance",fe)),{c(){s=o("div"),l=o("div"),t=o("div"),a=o("div"),a.textContent="MY TOOL",d=N(),m=o("div"),h=o("button"),D=N(),c=o("div"),p=o("fieldset"),g=o("div"),k=o("p"),k.textContent="On Duty:",b=N(),v=o("span"),y=be(I),S=N(),e=o("div"),u=o("fieldset"),ne(_.$$.fragment),U=N(),f=o("section"),M=o("button"),M.textContent="Change Duty",j=N(),G=o("button"),G.textContent="Request Back Up",r(a,"class","title-bar-text"),r(h,"aria-label","Close"),r(m,"class","title-bar-controls"),r(t,"class","title-bar"),r(k,"class","nameField text-h6 text-weight-light  svelte-325c33"),r(v,"class","inputField text-h6 text-weight-medium svelte-325c33"),J(v,"dutyon",!!n[3]),r(g,"class","field-row"),w(g,"justify-content","center"),r(e,"class","field-row"),w(e,"justify-content","center"),r(p,"class","text-center"),r(f,"class","field-row"),w(f,"justify-content","space-around"),w(f,"align-content","center"),r(c,"class","window-body relative-position full-height"),w(c,"max-height","100vh",!1),r(l,"class","window full-width full-height"),r(s,"class","absolute-center "),w(s,"width","70%"),w(s,"max-width","100%"),w(s,"min-width","40%")},m(C,O){K(C,s,O),i(s,l),i(l,t),i(t,a),i(t,d),i(t,m),i(m,h),i(l,D),i(l,c),i(c,p),i(p,g),i(g,k),i(g,b),i(g,v),i(v,y),i(p,S),i(p,e),i(e,u),ie(_,u,null),i(c,U),i(c,f),i(f,M),i(f,j),i(f,G),n[12](s),z=!0,P||(Q=[E(h,"click",se(n[10])),E(M,"click",n[6]),E(G,"click",n[7])],P=!0)},p(C,[O]){(!z||O&8)&&I!==(I=C[3]===!0?"YES":"NO")&&ve(y,I),O&8&&J(v,"dutyon",!!C[3]);const x={};O&2&&(x.data=C[1]||[]),!q&&O&1&&(q=!0,x.instance=C[0],le(()=>q=!1)),_.$set(x)},i(C){z||(F(_.$$.fragment,C),z=!0)},o(C){T(_.$$.fragment,C),z=!1},d(C){C&&L(s),ae(_),n[12](null),P=!1,oe(Q)}}}function Me(n,s,l){let t,a,d;R(n,W,e=>l(3,t=e)),R(n,de,e=>l(9,a=e)),R(n,B,e=>l(1,d=e));let m,h;const D={table:{width:"100%"},header:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},footer:{width:"100%"}};let{params:c={}}=s;const p=[{id:"casid",name:"Case ID",width:"10%"},{id:"name",name:"Citizen Name",width:"10%"},{id:"citizenid",name:"Citizenid",width:"10%"},{id:"coordinates",name:"Coordinates",formatter:(e,u)=>H("button",{onClick:()=>{g(u.cells[3].data)}},"Set"),width:"10%"},{id:"delete",name:"Delete",formatter:(e,u)=>H("button",{onClick:()=>{k(u.cells[0].data)}},"Delete"),width:"10%"}];async function g(e){await A("setDestination",{coords:e})}function k(e){A("deleteAssignment",{id:e}).then(async u=>{u&&(d.splice(d.findIndex(_=>_.id===e),1),B.set(d),await h.updateConfig({data:d}).forceRender())})}ye(()=>{h.forceRender()});async function b(){await A("changeDuty",{user:a.citizenid,duty:t}).then(e=>{V(W,t=e,t),console.log(e)})}function v(){let e=!0,u=new Ie({target:m,props:{open:e}});return u.$on("closeModal",()=>e=!1),u}const I=()=>re("/");function y(e){h=e,l(0,h)}function S(e){Y[e?"unshift":"push"](()=>{m=e,l(2,m)})}return n.$$set=e=>{"params"in e&&l(8,c=e.params)},n.$$.update=()=>{n.$$.dirty&771&&c.reload&&(A("getMycalls",{cs:a.callsign}).then(e=>{V(B,d=e,d),h.updateConfig({data:d!=null?d:[]}).forceRender()}),l(8,c.reload=!1,c))},[h,d,m,t,D,p,b,v,c,a,I,y,S]}class Oe extends ${constructor(s){super(),ee(this,s,Me,Se,te,{params:8})}}export{Oe as default};
